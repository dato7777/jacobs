{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { addCategory, getCategories, deleteCategory } from './CategoryAPI ';\nimport jwt_decode from \"jwt-decode\"; // state-data (initial data)\n\nconst initialState = {\n  categories: []\n}; // simple async method(component can call it)\n// async (1)\n\nexport const getCategoriesAsync = createAsyncThunk('categories/getCategories', async action => {\n  const response = await getCategories(action);\n  return response.data;\n});\nexport const addCategoryAsync = createAsyncThunk('categories/addCategory', async data => {\n  const response = await addCategory(data.token, data.categDesc);\n  return response.data;\n});\nexport const deleteCategoryAsync = createAsyncThunk('categories/deleteCategory', async data => {\n  const response = await deleteCategory(data.token, data.catID);\n  return response.data;\n});\nexport const CategoriesSlice = createSlice({\n  name: 'categories',\n  initialState,\n  reducers: {},\n  // happens when async is done - callback\n  // async (3)\n  extraReducers: builder => {\n    builder.addCase(addCategoryAsync.fulfilled, (state, action) => {\n      state.categories = JSON.parse(localStorage.getItem('myLocalCategs'));\n      state.categories.push(action.payload);\n      localStorage.setItem(\"myLocalCategs\", JSON.stringify(state.categories));\n    }).addCase(getCategoriesAsync.fulfilled, (state, action) => {\n      state.categories = action.payload;\n      localStorage.setItem(\"myLocalCategs\", JSON.stringify(state.categories));\n    }).addCase(deleteCategoryAsync.fulfilled, (state, action) => {\n      state.categories = state.categories.filter(x => x.id !== action.payload);\n      localStorage.setItem(\"myLocalCategs\", JSON.stringify(state.categories));\n    });\n  }\n}); // export of sync methods only\n// export of any part of the state\n\nexport const selectCategories = state => state.categories.categories; // export reducer to the application\n\nexport default CategoriesSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","addCategory","getCategories","deleteCategory","jwt_decode","initialState","categories","getCategoriesAsync","action","response","data","addCategoryAsync","token","categDesc","deleteCategoryAsync","catID","CategoriesSlice","name","reducers","extraReducers","builder","addCase","fulfilled","state","JSON","parse","localStorage","getItem","push","payload","setItem","stringify","filter","x","id","selectCategories","reducer"],"sources":["/Users/dato/My Python Stuff/lastdayproject2/Jacobs-Dreams/Front/my-app/src/app/pages/CategoriesSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { addCategory, getCategories,deleteCategory} from './CategoryAPI ';\nimport jwt_decode from \"jwt-decode\";\n\n// state-data (initial data)\nconst initialState = {\n  categories: []\n};\n\n// simple async method(component can call it)\n// async (1)\nexport const getCategoriesAsync = createAsyncThunk(\n  'categories/getCategories',\n  async (action) => {\n    const response = await getCategories(action);\n    return response.data;\n  }\n);\n\nexport const addCategoryAsync = createAsyncThunk(\n  'categories/addCategory',\n  async (data) => {\n    const response = await addCategory(data.token,data.categDesc);\n    return response.data;\n  }\n);\nexport const deleteCategoryAsync = createAsyncThunk(\n  'categories/deleteCategory',\n  async (data) => {\n    const response = await deleteCategory(data.token,data.catID);\n    return response.data;\n  }\n);\n\nexport const CategoriesSlice = createSlice({\n\n  name: 'categories',\n  initialState,\n  reducers: {\n\n  },\n  // happens when async is done - callback\n  // async (3)\n  extraReducers: (builder) => {\n    builder\n      \n      .addCase(addCategoryAsync.fulfilled, (state, action) => {\n        state.categories=JSON.parse(localStorage.getItem('myLocalCategs'))\n        \n        state.categories.push(action.payload)\n        localStorage.setItem(\"myLocalCategs\", JSON.stringify(state.categories));\n        \n      })\n      .addCase(getCategoriesAsync.fulfilled, (state, action) => {\n        state.categories = action.payload;\n        localStorage.setItem(\"myLocalCategs\", JSON.stringify(state.categories));\n      }\n      )\n      .addCase(deleteCategoryAsync.fulfilled, (state, action) => {\n        state.categories = state.categories.filter((x) => x.id !== action.payload);\n        localStorage.setItem(\"myLocalCategs\", JSON.stringify(state.categories));\n      }\n      );\n  },\n});\n// export of sync methods only\n\n// export of any part of the state\nexport const selectCategories = (state) => state.categories.categories;\n// export reducer to the application\nexport default CategoriesSlice.reducer;\n"],"mappings":"AAAA,SAASA,gBAAT,EAA2BC,WAA3B,QAA8C,kBAA9C;AACA,SAASC,WAAT,EAAsBC,aAAtB,EAAoCC,cAApC,QAAyD,gBAAzD;AACA,OAAOC,UAAP,MAAuB,YAAvB,C,CAEA;;AACA,MAAMC,YAAY,GAAG;EACnBC,UAAU,EAAE;AADO,CAArB,C,CAIA;AACA;;AACA,OAAO,MAAMC,kBAAkB,GAAGR,gBAAgB,CAChD,0BADgD,EAEhD,MAAOS,MAAP,IAAkB;EAChB,MAAMC,QAAQ,GAAG,MAAMP,aAAa,CAACM,MAAD,CAApC;EACA,OAAOC,QAAQ,CAACC,IAAhB;AACD,CAL+C,CAA3C;AAQP,OAAO,MAAMC,gBAAgB,GAAGZ,gBAAgB,CAC9C,wBAD8C,EAE9C,MAAOW,IAAP,IAAgB;EACd,MAAMD,QAAQ,GAAG,MAAMR,WAAW,CAACS,IAAI,CAACE,KAAN,EAAYF,IAAI,CAACG,SAAjB,CAAlC;EACA,OAAOJ,QAAQ,CAACC,IAAhB;AACD,CAL6C,CAAzC;AAOP,OAAO,MAAMI,mBAAmB,GAAGf,gBAAgB,CACjD,2BADiD,EAEjD,MAAOW,IAAP,IAAgB;EACd,MAAMD,QAAQ,GAAG,MAAMN,cAAc,CAACO,IAAI,CAACE,KAAN,EAAYF,IAAI,CAACK,KAAjB,CAArC;EACA,OAAON,QAAQ,CAACC,IAAhB;AACD,CALgD,CAA5C;AAQP,OAAO,MAAMM,eAAe,GAAGhB,WAAW,CAAC;EAEzCiB,IAAI,EAAE,YAFmC;EAGzCZ,YAHyC;EAIzCa,QAAQ,EAAE,EAJ+B;EAOzC;EACA;EACAC,aAAa,EAAGC,OAAD,IAAa;IAC1BA,OAAO,CAEJC,OAFH,CAEWV,gBAAgB,CAACW,SAF5B,EAEuC,CAACC,KAAD,EAAQf,MAAR,KAAmB;MACtDe,KAAK,CAACjB,UAAN,GAAiBkB,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,CAAjB;MAEAJ,KAAK,CAACjB,UAAN,CAAiBsB,IAAjB,CAAsBpB,MAAM,CAACqB,OAA7B;MACAH,YAAY,CAACI,OAAb,CAAqB,eAArB,EAAsCN,IAAI,CAACO,SAAL,CAAeR,KAAK,CAACjB,UAArB,CAAtC;IAED,CARH,EASGe,OATH,CASWd,kBAAkB,CAACe,SAT9B,EASyC,CAACC,KAAD,EAAQf,MAAR,KAAmB;MACxDe,KAAK,CAACjB,UAAN,GAAmBE,MAAM,CAACqB,OAA1B;MACAH,YAAY,CAACI,OAAb,CAAqB,eAArB,EAAsCN,IAAI,CAACO,SAAL,CAAeR,KAAK,CAACjB,UAArB,CAAtC;IACD,CAZH,EAcGe,OAdH,CAcWP,mBAAmB,CAACQ,SAd/B,EAc0C,CAACC,KAAD,EAAQf,MAAR,KAAmB;MACzDe,KAAK,CAACjB,UAAN,GAAmBiB,KAAK,CAACjB,UAAN,CAAiB0B,MAAjB,CAAyBC,CAAD,IAAOA,CAAC,CAACC,EAAF,KAAS1B,MAAM,CAACqB,OAA/C,CAAnB;MACAH,YAAY,CAACI,OAAb,CAAqB,eAArB,EAAsCN,IAAI,CAACO,SAAL,CAAeR,KAAK,CAACjB,UAArB,CAAtC;IACD,CAjBH;EAmBD;AA7BwC,CAAD,CAAnC,C,CA+BP;AAEA;;AACA,OAAO,MAAM6B,gBAAgB,GAAIZ,KAAD,IAAWA,KAAK,CAACjB,UAAN,CAAiBA,UAArD,C,CACP;;AACA,eAAeU,eAAe,CAACoB,OAA/B"},"metadata":{},"sourceType":"module"}